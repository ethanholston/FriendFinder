<!DOCTYPE html>

<html>
  <head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>
  </head>

  <body>
    <div class="container">
      <div class="jumbotron">
        <h1 class="display-4">Survey Questions</h1>
      </div>
      <h1>About You</h1>
      <form id="questionaire">
        <div id="about-you">
          <h3>Name (required)</h3>
          <input type="text" name="name" size=100% required>
          <h3>Link to photo (required)</h3> 
          <input type="text" name="link" size=100% required>
        </div>
        <div id="questions">
          <div id="question-1">
            <h1>Question 1</h1>
            <h3>I am a 'worrier'</h3>
            <select required class="question">
              <option value="" disabled selected>Select your option</option>
              <option value="5">5 (strongly agree)</option>
              <option value="4">4</option>
              <option value="3">3 (neutral)</option>
              <option value="2">2</option>
              <option value="1">1 (strongly disagree)</option>
            </select>
          </div>
          <div id="question-2">
            <h1>Question 2</h1>
            <h3>I make friends easily</h3>
            <select required class="question">
              <option value="" disabled selected>Select your option</option>
              <option value="5">5 (strongly agree)</option>
              <option value="4">4</option>
              <option value="3">3 (neutral)</option>
              <option value="2">2</option>
              <option value="1">1 (strongly disagree)</option>
            </select>
          </div>
          <div id="question-3">
            <h1>Question 3</h1>
            <h3>I have a vivid imagination</h3>
            <select required class="question">
              <option value="" disabled selected>Select your option</option>
              <option value="5">5 (strongly agree)</option>
              <option value="4">4</option>
              <option value="3">3 (neutral)</option>
              <option value="2">2</option>
              <option value="1">1 (strongly disagree)</option>
            </select>
          </div>
          <div id="question-4">
            <h1>Question 4</h1>
            <h3>I complete tasks successfully</h3>
            <select required class="question">
              <option value="" disabled selected>Select your option</option>
              <option value="5">5 (strongly agree)</option>
              <option value="4">4</option>
              <option value="3">3 (neutral)</option>
              <option value="2">2</option>
              <option value="1">1 (strongly disagree)</option>
            </select>
          </div>
          <div id="question-5">
            <h1>Question 5</h1>
            <h3>I think art is important</h3>
            <select required class="question">
              <option value="" disabled selected>Select your option</option>
              <option value="5">5 (strongly agree)</option>
              <option value="4">4</option>
              <option value="3">3 (neutral)</option>
              <option value="2">2</option>
              <option value="1">1 (strongly disagree)</option>
            </select>
          </div>
          <div id="question-6">
            <h1>Question 6</h1>
            <h3>I don't like things to be a mess - I like to tidy up</h3>
            <select required class="question">
              <option value="" disabled selected>Select your option</option>
              <option value="5">5 (strongly agree)</option>
              <option value="4">4</option>
              <option value="3">3 (neutral)</option>
              <option value="2">2</option>
              <option value="1">1 (strongly disagree)</option>
            </select>
          </div>
          <div id="question-7">
            <h1>Question 7</h1>
            <h3>I am always busy - always on the go</h3>
            <select required class="question">
              <option value="" disabled selected>Select your option</option>
              <option value="5">5 (strongly agree)</option>
              <option value="4">4</option>
              <option value="3">3 (neutral)</option>
              <option value="2">2</option>
              <option value="1">1 (strongly disagree)</option>
            </select>
          </div>
          <div id="question-8">
            <h1>Question 8</h1>
            <h3>I love a good argument - a good fight</h3>
            <select required class="question">
              <option value="" disabled selected>Select your option</option>
              <option value="5">5 (strongly agree)</option>
              <option value="4">4</option>
              <option value="3">3 (neutral)</option>
              <option value="2">2</option>
              <option value="1">1 (strongly disagree)</option>
            </select>
          </div>
          <div id="question-9">
            <h1>Question 9</h1>
            <h3>I am very spontaneous</h3>
            <select required class="question">
              <option value="" disabled selected>Select your option</option>
              <option value="5">5 (strongly agree)</option>
              <option value="4">4</option>
              <option value="3">3 (neutral)</option>
              <option value="2">2</option>
              <option value="1">1 (strongly disagree)</option>
            </select>
          </div>
          <div id="question-10">
            <h1>Question 10</h1>
            <h3>I never sit still - I'm always on the go</h3>
            <select required class="question" >
              <option value="" disabled selected>Select your option</option>
              <option value="5">5 (strongly agree)</option>
              <option value="4">4</option>
              <option value="3">3 (neutral)</option>
              <option value="2">2</option>
              <option value="1">1 (strongly disagree)</option>
            </select>
            <br>
            <button class="btn btn-lg btn-default" type="submit">Submit</button> 
          </div>
        </div>
      </form>
    </div>
    <script type="text/javascript">
      var Friend = function(name, photo, answers){
        this.name = name,
        this.photo = photo,
        this.answers = answers
      }

      var friendArr = [];

      $(document).on("submit", "#questionaire", function(event){
        event.preventDefault();
        var ansArr = [];
        var name = $("[name=name]").val().trim();
        var photo = $("[name=link]").val().trim();
        $(".question").each(function(){
          ansArr.push($(this).children("option:selected").val());
        });
        console.log(ansArr);
        var newFriend = new Friend(name, photo, ansArr);
        $.ajax("/api/friends", {
          type: "POST",
          data: newFriend
        }).then(
          function(res){
            console.log("Friend submitted");
            alert("Your new best friend is: " + res.name);
          }
        );
      });
    </script>
  </body>

</html>